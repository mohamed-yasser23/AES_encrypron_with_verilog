 module AES_main #(parameter Nk =6 , parameter Nr = 12) (clk,Seg1 ,Seg2 , Seg3 ,LED);
 input clk;
   output[6:0] Seg1;
   output[6:0] Seg2;
   output[6:0] Seg3;
   output reg LED;
   wire clks=clk;
   wire [127:0] pl =128'h00112233445566778899aabbccddeeff;
   wire[191:0] ky2= 192'h000102030405060708090a0b0c0d0e0f1011121314151617;
   wire [255:0] ky3= 256'h000102030405060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f; 
   wire [127:0] ky1 =128'h000102030405060708090a0b0c0d0e0f;
   wire [127:0] cOut;
   wire [127:0] DecOut;
   reg [127:0]  seg_DE ;
   reg [127:0] inpD;
   reg [4:0] Count = 5'd0;

   cipherEN #(6,12)E (clks,pl,cOut,ky2);
   decipherDE #(6,12)D (clks,cOut,DecOut,ky2);

   Showing_LS_Byte  S (clks , seg_DE[7:0] , Seg1 , Seg2 , Seg3);

   always @(*) begin 
    if(Count <= Nr+1) begin 
        seg_DE = cOut;
        LED = (cOut==pl) ? 1'b1:1'b0 ;

    end 
    else if(Count >Nr+1 && Count <= 2*(Nr+1)) begin 
        seg_DE = DecOut;
        LED = (DecOut==pl) ? 1'b1:1'b0 ;

    end

   end 

   always@(posedge clk) begin
      $display ("count %d", Count);
      $display ("Cipher_out=%h",cOut);
      $display ("Decipher_out=%h",DecOut);


     
      


      if(Count == Nr+1 ) begin 
        
        Count<= Count + 5'd1;
      end
      else if(Count ==2*(Nr+1)) 
      begin 
       // LED <= (DecOut==pl) ? 1'b1:1'b0 ;
        Count <= 5'd0;
      end
      else begin 
        Count <= Count + 5'd1;
      end
        
      end
   endmodule
